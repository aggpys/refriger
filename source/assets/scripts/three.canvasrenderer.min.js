var $jscomp={scope:{},checkStringArgs:function(a,r,d){if(null==a)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(r instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return a+""}};
$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,r,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[r]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,r,d,t){if(r){d=$jscomp.global;a=a.split(".");for(t=0;t<a.length-1;t++){var K=a[t];K in d||(d[K]={});d=d[K]}a=a[a.length-1];t=d[a];r=r(t);r!=t&&null!=r&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:r})}};
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var d=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var t="";a;)if(a&1&&(t+=d),a>>>=1)d+=d;return t}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,d,t){var r=this.length||0;0>d&&(d=Math.max(0,r+d));if(null==t||t>r)t=r;t=Number(t);0>t&&(t=Math.max(0,r+t));for(d=Number(d||0);d<t;d++)this[d]=a;return this}},"es6-impl","es3");THREE.SpriteCanvasMaterial=function(a){THREE.Material.call(this);this.type="SpriteCanvasMaterial";this.color=new THREE.Color(16777215);this.program=function(a,d){};this.setValues(a)};THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.SpriteCanvasMaterial.prototype.constructor=THREE.SpriteCanvasMaterial;THREE.SpriteCanvasMaterial.prototype.clone=function(){var a=new THREE.SpriteCanvasMaterial;a.copy(this);a.color.copy(this.color);a.program=this.program;return a};
THREE.CanvasRenderer=function(a){function r(k,a,d,f){aa(a);ba(d);ca(f);L(k.getStyle());b.stroke();D.expandByScalar(2*a)}function d(k){G(k.getStyle());b.fill()}function t(k){if(0===k.version||k instanceof THREE.CompressedTexture||k instanceof THREE.DataTexture)return{canvas:void 0,version:k.version};var a=k.image;if(!1===a.complete)return{canvas:void 0,version:0};var d=document.createElement("canvas");d.width=a.width;d.height=a.height;var f=d.getContext("2d");f.setTransform(1,0,0,-1,0,a.height);f.drawImage(a,
0,0);var a=k.wrapS===THREE.RepeatWrapping,f=k.wrapT===THREE.RepeatWrapping,c="no-repeat";!0===a&&!0===f?c="repeat":!0===a?c="repeat-x":!0===f&&(c="repeat-y");d=b.createPattern(d,c);if(k.onUpdate)k.onUpdate(k);return{canvas:d,version:k.version}}function K(k,a,d,f,c,l,e,m,g,n,p,q,h){var v=R[h.id];if(void 0===v||v.version!==h.version)v=t(h),R[h.id]=v;if(void 0!==v.canvas){G(v.canvas);var v=h.offset.x/h.repeat.x,r=h.offset.y/h.repeat.y,u=h.image.width*h.repeat.x;h=h.image.height*h.repeat.y;e=(e+v)*u;
m=(m+r)*h;d-=k;f-=a;c-=k;l-=a;g=(g+v)*u-e;n=(n+r)*h-m;p=(p+v)*u-e;q=(q+r)*h-m;h=g*q-p*n;0!==h&&(v=1/h,h=(q*d-n*c)*v,n=(q*f-n*l)*v,d=(g*c-p*d)*v,f=(g*l-p*f)*v,k=k-h*e-d*m,a=a-n*e-f*m,b.save(),b.transform(h,n,d,f,k,a),b.fill(),b.restore())}else G("rgba( 0, 0, 0, 1)"),b.fill()}function da(k,a,b){var d=a.x-k.x,c=a.y-k.y,f=d*d+c*c;0!==f&&(b/=Math.sqrt(f),d*=b,c*=b,a.x+=d,a.y+=c,k.x-=d,k.y-=c)}function S(a){ea!==a&&(ea=b.globalAlpha=a)}function T(a){fa!==a&&(a===THREE.NormalBlending?b.globalCompositeOperation=
"source-over":a===THREE.AdditiveBlending?b.globalCompositeOperation="lighter":a===THREE.SubtractiveBlending?b.globalCompositeOperation="darker":a===THREE.MultiplyBlending&&(b.globalCompositeOperation="multiply"),fa=a)}function aa(a){ga!==a&&(ga=b.lineWidth=a)}function ba(a){ha!==a&&(ha=b.lineCap=a)}function ca(a){ia!==a&&(ia=b.lineJoin=a)}function L(a){ja!==a&&(ja=b.strokeStyle=a)}function G(a){ka!==a&&(ka=b.fillStyle=a)}function ra(a){sa.length!==a.length&&(b.setLineDash(a),sa=a)}console.log("THREE.CanvasRenderer",
THREE.REVISION);a=a||{};var N=this,la,ma,O,Ha=new THREE.Projector,B=void 0!==a.canvas?a.canvas:document.createElement("canvas"),M=B.width,H=B.height,w=Math.floor(M/2),x=Math.floor(H/2),ta=0,ua=0,va=M,wa=H,C=1,b=B.getContext("2d",{alpha:!0===a.alpha}),F=new THREE.Color(0),I=!0===a.alpha?0:1,ea=1,fa=0,ja=null,ka=null,ga=null,ha=null,ia=null,sa=[],m,u,E;new THREE.RenderableVertex;new THREE.RenderableVertex;var U,V,W,X,Y,Z,z=new THREE.Color;new THREE.Color;new THREE.Color;new THREE.Color;new THREE.Color;
var na=new THREE.Color,xa=new THREE.Color,oa=new THREE.Color,R={},J,ya,za,Aa,Ba,Ca,Da,P=new THREE.Box2,f=new THREE.Box2,D=new THREE.Box2,pa=new THREE.Color,Ea=new THREE.Color,Fa=new THREE.Color,qa=new THREE.Vector3,Ga=new THREE.Vector3,A=new THREE.Vector3,Q=new THREE.Matrix3;void 0===b.setLineDash&&(b.setLineDash=function(){});this.domElement=B;this.sortElements=this.sortObjects=this.autoClear=!0;this.info={render:{vertices:0,faces:0}};this.supportsVertexTextures=function(){};this.setFaceCulling=
function(){};this.getContext=function(){return b};this.getContextAttributes=function(){return b.getContextAttributes()};this.getPixelRatio=function(){return C};this.setPixelRatio=function(a){void 0!==a&&(C=a)};this.setSize=function(a,b,d){M=a*C;H=b*C;B.width=M;B.height=H;w=Math.floor(M/2);x=Math.floor(H/2);!1!==d&&(B.style.width=a+"px",B.style.height=b+"px");P.min.set(-w,-x);P.max.set(w,x);f.min.set(-w,-x);f.max.set(w,x);ea=1;fa=0;ia=ha=ga=ka=ja=null;this.setViewport(0,0,a,b)};this.setViewport=function(a,
b,d,f){ta=a*C;ua=b*C;va=d*C;wa=f*C};this.setScissor=function(){};this.setScissorTest=function(){};this.setClearColor=function(a,b){F.set(a);I=void 0!==b?b:1;f.min.set(-w,-x);f.max.set(w,x)};this.setClearColorHex=function(a,b){console.warn("THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(a,b)};this.getClearColor=function(){return F};this.getClearAlpha=function(){return I};this.getMaxAnisotropy=function(){return 0};this.clear=function(){!1===
f.isEmpty()&&(f.intersect(P),f.expandByScalar(2),f.min.x+=w,f.min.y=-f.min.y+x,f.max.x+=w,f.max.y=-f.max.y+x,1>I&&b.clearRect(f.min.x|0,f.max.y|0,f.max.x-f.min.x|0,f.min.y-f.max.y|0),0<I&&(T(THREE.NormalBlending),S(1),G("rgba("+Math.floor(255*F.r)+","+Math.floor(255*F.g)+","+Math.floor(255*F.b)+","+I+")"),b.fillRect(f.min.x|0,f.max.y|0,f.max.x-f.min.x|0,f.min.y-f.max.y|0)),f.makeEmpty())};this.clearColor=function(){};this.clearDepth=function(){};this.clearStencil=function(){};this.render=function(a,
v){if(!1===v instanceof THREE.Camera)console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");else{!0===this.autoClear&&this.clear();N.info.render.vertices=0;N.info.render.faces=0;b.setTransform(va/M,0,0,-wa/H,ta,H-ua);b.translate(w,x);la=Ha.projectScene(a,v,this.sortObjects,this.sortElements);ma=la.elements;O=la.lights;Q.getNormalMatrix(v.matrixWorldInverse);pa.setRGB(0,0,0);Ea.setRGB(0,0,0);Fa.setRGB(0,0,0);for(var k=0,B=O.length;k<B;k++){var c=O[k],l=c.color;c instanceof
THREE.AmbientLight?pa.add(l):c instanceof THREE.DirectionalLight?Ea.add(l):c instanceof THREE.PointLight&&Fa.add(l)}k=0;for(B=ma.length;k<B;k++){var e=ma[k],y=e.material;if(void 0!==y&&0!==y.opacity){D.makeEmpty();if(e instanceof THREE.RenderableSprite){m=e;m.x*=w;m.y*=x;var c=m,g=e,l=y;S(l.opacity);T(l.blending);var n=g.scale.x*w,g=g.scale.y*x,e=.5*Math.sqrt(n*n+g*g);D.min.set(c.x-e,c.y-e);D.max.set(c.x+e,c.y+e);if(l instanceof THREE.SpriteMaterial){var p=l.map;if(null!==p){e=R[p.id];if(void 0===
e||e.version!==p.version)e=t(p),R[p.id]=e;if(void 0!==e.canvas){G(e.canvas);var q=p.image,e=q.width*p.offset.x,y=q.height*p.offset.y,h=q.width*p.repeat.x,p=q.height*p.repeat.y,q=n/h,C=g/p;b.save();b.translate(c.x,c.y);0!==l.rotation&&b.rotate(l.rotation);b.translate(-n/2,-g/2);b.scale(q,C);b.translate(-e,-y);b.fillRect(e,y,h,p);b.restore()}}else G(l.color.getStyle()),b.save(),b.translate(c.x,c.y),0!==l.rotation&&b.rotate(l.rotation),b.scale(n,-g),b.fillRect(-.5,-.5,1,1),b.restore()}else l instanceof
THREE.SpriteCanvasMaterial&&(L(l.color.getStyle()),G(l.color.getStyle()),b.save(),b.translate(c.x,c.y),0!==l.rotation&&b.rotate(l.rotation),b.scale(n,g),l.program(b),b.restore())}else if(e instanceof THREE.RenderableLine){if(m=e.v1,u=e.v2,m.positionScreen.x*=w,m.positionScreen.y*=x,u.positionScreen.x*=w,u.positionScreen.y*=x,D.setFromPoints([m.positionScreen,u.positionScreen]),!0===P.intersectsBox(D))if(c=m,l=u,n=e,g=y,S(g.opacity),T(g.blending),b.beginPath(),b.moveTo(c.positionScreen.x,c.positionScreen.y),
b.lineTo(l.positionScreen.x,l.positionScreen.y),g instanceof THREE.LineBasicMaterial){aa(g.linewidth);ba(g.linecap);ca(g.linejoin);if(g.vertexColors!==THREE.VertexColors)L(g.color.getStyle());else if(e=n.vertexColors[0].getStyle(),n=n.vertexColors[1].getStyle(),e===n)L(e);else{try{var F=b.createLinearGradient(c.positionScreen.x,c.positionScreen.y,l.positionScreen.x,l.positionScreen.y);F.addColorStop(0,e);F.addColorStop(1,n)}catch(Ia){F=e}L(F)}b.stroke();D.expandByScalar(2*g.linewidth)}else g instanceof
THREE.LineDashedMaterial&&(aa(g.linewidth),ba(g.linecap),ca(g.linejoin),L(g.color.getStyle()),ra([g.dashSize,g.gapSize]),b.stroke(),D.expandByScalar(2*g.linewidth),ra([]))}else if(e instanceof THREE.RenderableFace){m=e.v1;u=e.v2;E=e.v3;if(-1>m.positionScreen.z||1<m.positionScreen.z)continue;if(-1>u.positionScreen.z||1<u.positionScreen.z)continue;if(-1>E.positionScreen.z||1<E.positionScreen.z)continue;m.positionScreen.x*=w;m.positionScreen.y*=x;u.positionScreen.x*=w;u.positionScreen.y*=x;E.positionScreen.x*=
w;E.positionScreen.y*=x;0<y.overdraw&&(da(m.positionScreen,u.positionScreen,y.overdraw),da(u.positionScreen,E.positionScreen,y.overdraw),da(E.positionScreen,m.positionScreen,y.overdraw));D.setFromPoints([m.positionScreen,u.positionScreen,E.positionScreen]);if(!0===P.intersectsBox(D)){l=m;n=u;g=E;c=y;N.info.render.vertices+=3;N.info.render.faces++;S(c.opacity);T(c.blending);U=l.positionScreen.x;V=l.positionScreen.y;W=n.positionScreen.x;X=n.positionScreen.y;Y=g.positionScreen.x;Z=g.positionScreen.y;
var y=U,h=V,p=W,q=X,C=Y,I=Z;b.beginPath();b.moveTo(y,h);b.lineTo(p,q);b.lineTo(C,I);b.closePath();if((c instanceof THREE.MeshLambertMaterial||c instanceof THREE.MeshPhongMaterial)&&null===c.map){na.copy(c.color);xa.copy(c.emissive);c.vertexColors===THREE.FaceColors&&na.multiply(e.color);z.copy(pa);Ga.copy(l.positionWorld).add(n.positionWorld).add(g.positionWorld).divideScalar(3);l=Ga;n=e.normalModel;g=z;e=0;for(y=O.length;e<y;e++)h=O[e],oa.copy(h.color),h instanceof THREE.DirectionalLight?(p=qa.setFromMatrixPosition(h.matrixWorld).normalize(),
q=n.dot(p),0>=q||(q*=h.intensity,g.add(oa.multiplyScalar(q)))):h instanceof THREE.PointLight&&(p=qa.setFromMatrixPosition(h.matrixWorld),q=n.dot(qa.subVectors(p,l).normalize()),0>=q||(q*=0==h.distance?1:1-Math.min(l.distanceTo(p)/h.distance,1),0!=q&&(q*=h.intensity,g.add(oa.multiplyScalar(q)))));z.multiply(na).add(xa);!0===c.wireframe?r(z,c.wireframeLinewidth,c.wireframeLinecap,c.wireframeLinejoin):d(z)}else c instanceof THREE.MeshBasicMaterial||c instanceof THREE.MeshLambertMaterial||c instanceof
THREE.MeshPhongMaterial?null!==c.map?c.map.mapping===THREE.UVMapping&&(J=e.uvs,K(U,V,W,X,Y,Z,J[0].x,J[0].y,J[1].x,J[1].y,J[2].x,J[2].y,c.map)):null!==c.envMap?c.envMap.mapping===THREE.SphericalReflectionMapping&&(A.copy(e.vertexNormalsModel[0]).applyMatrix3(Q),ya=.5*A.x+.5,za=.5*A.y+.5,A.copy(e.vertexNormalsModel[1]).applyMatrix3(Q),Aa=.5*A.x+.5,Ba=.5*A.y+.5,A.copy(e.vertexNormalsModel[2]).applyMatrix3(Q),Ca=.5*A.x+.5,Da=.5*A.y+.5,K(U,V,W,X,Y,Z,ya,za,Aa,Ba,Ca,Da,c.envMap)):(z.copy(c.color),c.vertexColors===
THREE.FaceColors&&z.multiply(e.color),!0===c.wireframe?r(z,c.wireframeLinewidth,c.wireframeLinecap,c.wireframeLinejoin):d(z)):(c instanceof THREE.MeshNormalMaterial?(A.copy(e.normalModel).applyMatrix3(Q),z.setRGB(A.x,A.y,A.z).multiplyScalar(.5).addScalar(.5)):z.setRGB(1,1,1),!0===c.wireframe?r(z,c.wireframeLinewidth,c.wireframeLinecap,c.wireframeLinejoin):d(z))}}f.union(D)}}b.setTransform(1,0,0,1,0,0)}}};
